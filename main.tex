% Forgotten Pillar booktemplate by Michael Presecan
% 2025 (c) Michael Presecan
% See more <forgottenpillar.com> or <github.com/forgotten-pillar>


% Define language and layout variables directly in main.tex
% ---- THIS IS THE PLACE TO CHANGE THE LANGUAGE AND LAYOUT ----
\def\currentlang{pl} % currently: en, hr, pl, fr, sw, es, ar
\def\currentlayout{us-letter-half} % all options: book-print, iso-a4, iso-a5, mobile, us-letter, us-letter-half

% Pre-calculate the font size into a macro
\edef\myfontsize{%
  \ifnum\pdfstrcmp{\currentlayout}{iso-a4}=0 17pt\else
    \ifnum\pdfstrcmp{\currentlayout}{us-letter}=0 17pt\else 12pt\fi
  \fi%
}

% Pre-calculate the qr code size into a macro
\edef\qrcodesize{%
  \ifnum\pdfstrcmp{\currentlayout}{iso-a4}=0 2.5cm\else
    \ifnum\pdfstrcmp{\currentlayout}{us-letter}=0 2.5cm\else 1.5cm\fi
  \fi%
}

% Pre-calculate the license size into a macro
\ifnum\pdfstrcmp{\currentlayout}{us-letter-half}=0
  \def\licensesize{\footnotesize}
\else
  \ifnum\pdfstrcmp{\currentlayout}{iso-a5}=0
    \def\licensesize{\footnotesize}
  \else
    \def\licensesize{\small}
  \fi
\fi

\documentclass[\myfontsize,openany]{extbook}

% Book information
\newcommand{\authorname}{Michael Preseƒçan \& Marjan Gerguri}
\newcommand{\website}{forgottenpillar.com}
\newcommand{\editionyear}{2025}

% Input and output encoding
\usepackage[T1]{fontenc}

% Styling packages
\usepackage{latex-setup/styles/epub}
\usepackage{latex-setup/styles/poems}
\usepackage{latex-setup/styles/options}
\usepackage{latex-setup/styles/forgottenpillar}

% Load the appropriate layout package
\usepackage{latex-setup/layout/\currentlayout}

% Load language-specific general content
\input{lang/\currentlang/frontmatter/general}

\title{\booktitle}
\author{\authorname}
\titlepic{\includegraphics[width=\textwidth]{lang/\currentlang/covers/\currentlayout/front.jpg}} 

\begin{document}
% Include covers based on language and layout
\input{latex-setup/covers/front}
\input{latex-setup/covers/first-page}
\input{lang/\currentlang/content}
\input{latex-setup/covers/back}
\end{document}